"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[108],{108:(t,e,n)=>{let r;n.r(e);const a=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let o=new Uint8Array;function i(t,e){return a.decode((0===o.byteLength&&(o=new Uint8Array(r.memory.buffer)),o).subarray(t,t+e))}let s=new Int32Array;function c(){return 0===s.byteLength&&(s=new Int32Array(r.memory.buffer)),s}const _=Object.freeze({Up:0,0:"Up",Right:1,1:"Right",Down:2,2:"Down",Left:3,3:"Left"}),d=Object.freeze({Won:0,0:"Won",Lost:1,1:"Lost",Playing:2,2:"Playing"});class l{static __wrap(t){const e=Object.create(l.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.__wbg_world_free(t)}static new(t,e){const n=r.world_new(t,e);return l.__wrap(n)}width(){return r.world_width(this.ptr)>>>0}points(){return r.world_points(this.ptr)>>>0}reward_cell(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.world_reward_cell(n,this.ptr);var t=c()[n/4+0],e=c()[n/4+1];return 0===t?void 0:e>>>0}finally{r.__wbindgen_add_to_stack_pointer(16)}}snake_head(){return r.world_snake_head(this.ptr)>>>0}step(){r.world_step(this.ptr)}change_snake_direction(t){r.world_change_snake_direction(this.ptr,t)}snake_length(){return r.world_snake_length(this.ptr)>>>0}snake_cells(){return r.world_snake_cells(this.ptr)}start_game(){r.world_start_game(this.ptr)}game_status(){const t=r.world_game_status(this.ptr);return 3===t?void 0:t}game_status_text(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.world_game_status_text(n,this.ptr);var t=c()[n/4+0],e=c()[n/4+1];return i(t,e)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e)}}}async function w(t){void 0===t&&(t=new URL(n(263),n.b));const e=function(){const t={wbg:{}};return t.wbg.__wbg_random_e9c63cc4cc6da51f=function(t){var e;return e=t>>>0,Math.random()*e},t.wbg.__wbindgen_throw=function(t,e){throw new Error(i(t,e))},t}();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:a,module:c}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return function(t,e){return r=t.exports,w.__wbindgen_wasm_module=e,s=new Int32Array,o=new Uint8Array,r}(a,c)}w().then((function(t){var e=20,n=(144,144*Math.random()),r=l.new(12,n),a=r.width(),o=document.getElementById("points"),i=document.getElementById("game-status"),s=document.getElementById("snake-canvas"),c=s.getContext("2d");s.height=a*e,s.width=a*e;var w=document.getElementById("game-control-btn");function f(){var n,s,_,d;!function(){c.beginPath();for(var t=0;t<a+1;t++)c.moveTo(e*t,0),c.lineTo(e*t,a*e);for(var n=0;n<a+1;n++)c.moveTo(0,e*n),c.lineTo(a*e,e*n);c.stroke()}(),(n=new Uint32Array(t.memory.buffer,r.snake_cells(),r.snake_length())).slice().reverse().forEach((function(t,r){var o=t%a,i=Math.floor(t/a);c.fillStyle=r===n.length-1?"#7878db":"#000000",c.beginPath(),c.fillRect(o*e,i*e,e,e)})),c.stroke(),_=(s=r.reward_cell())%a,d=Math.floor(s/a),c.beginPath(),c.fillStyle="#FF0000",c.fillRect(_*e,d*e,e,e),c.stroke(),i.textContent=r.game_status_text(),o.textContent=r.points().toString()}function g(){var t=setTimeout((function(){c.clearRect(0,0,s.width,s.height),r.step(),f(),requestAnimationFrame(g)}),125),e=r.game_status();e!==d.Won&&e!==d.Lost||(w.textContent="Replay",clearTimeout(t))}w.addEventListener("click",(function(){void 0===r.game_status()?(w.textContent="Reset",r.start_game(),g()):location.reload()})),u(r),document.addEventListener("keydown",(function(t){switch(t.code){case"ArrowUp":r.change_snake_direction(_.Up);break;case"ArrowRight":r.change_snake_direction(_.Right);break;case"ArrowDown":r.change_snake_direction(_.Down);break;case"ArrowLeft":r.change_snake_direction(_.Left)}})),f()}));var u=function(t){document.getElementById("up").addEventListener("click",(function(){t.change_snake_direction(_.Up)})),document.getElementById("right").addEventListener("click",(function(){t.change_snake_direction(_.Right)})),document.getElementById("down").addEventListener("click",(function(){t.change_snake_direction(_.Down)})),document.getElementById("left").addEventListener("click",(function(){t.change_snake_direction(_.Left)}))}},263:(t,e,n)=>{t.exports=n.p+"b59208012a515ee3dfe6.wasm"}}]);